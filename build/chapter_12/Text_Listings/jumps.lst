GAS LISTING jumps.s 			page 1


   1              	# jumps.s
   2              	# Some instructions to illustrate machine code.
   3              	        .intel_syntax noprefix
   4              	        .text
   5              	        .globl  main
   6              	        .type   main, @function
   7              	main:
   8 0000 55       	        push    rbp         # save caller's frame pointer
   9 0001 4889E5   	        mov     rbp, rsp    # establish our frame pointer
  10              	
  11 0004 4831D8   	        xor     rax, rbx    # sets status flags
  12 0007 7506     	        jne     forward     # test ZF
  13              	back:
  14 0009 4D89C8   	        mov     r8, r9      # stuff to jump over
  15 000c 4889CB   	        mov     rbx, rcx
  16              	forward:
  17 000f 4831D8   	        xor     rax, rbx    # sets status flags
  18 0012 74F5     	        je      back        # test ZF
  19              	
  20 0014 B8000000 	        mov     eax, 0      # return 0 to os
  20      00
  21 0019 4889EC   	        mov     rsp, rbp    # restore stack pointer
  22 001c 5D       	        pop     rbp         # restore caller's frame pointer
  23 001d C3       	        ret                 # back to caller

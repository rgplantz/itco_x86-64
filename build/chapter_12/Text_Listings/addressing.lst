GAS LISTING addressing.s 			page 1


   1              	# addressing.s
   2              	# Some instructions to illustrate machine code.
   3              	        .intel_syntax noprefix
   4              	        .text
   5              	        .globl  main
   6              	        .type   main, @function
   7              	main:
   8 0000 55       	        push    rbp         # save caller's frame pointer
   9 0001 4889E5   	        mov     rbp, rsp    # establish our frame pointer
  10              	        
  11 0004 89C8     	        mov     eax, ecx    # 32 bits, low reg codes
  12 0006 89F7     	        mov     edi, esi    # highest reg codes
  13 0008 6689C8   	        mov     ax, cx      # 16 bits
  14 000b 88C8     	        mov     al, cl      # 8 bits
  15 000d 4489C7   	        mov     edi, r8d    # 32 bits, 64-bit register
  16 0010 4889C8   	        mov     rax, rcx    # 64 bits
  17              	
  18 0013 B0AB     	        mov     al, 0xab    # 8-bit immediate
  19 0015 66B8CDAB 	        mov     ax, 0xabcd  # 16-bit immediate
  20 0019 B812EFCD 	        mov     eax, 0xabcdef12  # 32-bit immediate
  20      AB
  21 001e 48B812EF 	        mov     rax, 0xabcdef12  #    to 64-bit reg
  21      CDAB0000 
  21      0000
  22 0028 48B87856 	        mov     rax, 0xabcdef12345678  # 64-bit immediate
  22      3412EFCD 
  22      AB00
  23              	
  24 0032 48C7C105 	        mov     rcx, 5              # for indexing
  24      000000
  25 0039 8B4500   	        mov     eax, [rbp]          # indirect
  26 003c 8B450F   	        mov     eax, 15[rbp]        # indirect + offset  
  27 003f 8B44290F 	        mov     eax, 15[rcx+rbp]    # indirect + offset and index 
  28 0043 8B448D0F 	        mov     eax, 15[4*rcx+rbp]  #      and scaled index 
  29              	       
  30 0047 B8000000 	        mov     eax, 0      # return 0 to os
  30      00
  31 004c 4889EC   	        mov     rsp, rbp    # restore stack pointer
  32 004f 5D       	        pop     rbp         # restore caller's frame pointer
  33 0050 C3       	        ret                 # back to caller

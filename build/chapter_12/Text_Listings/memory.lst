GAS LISTING memory.s 			page 1


   1              	# memory.s
   2              	# Some instructions to illustrate machine code.
   3              	        .intel_syntax noprefix
   4              	        .text
   5              	        .globl  main
   6              	        .type   main, @function
   7              	main:
   8 0000 55       	        push    rbp         # save caller's frame pointer
   9 0001 4889E5   	        mov     rbp, rsp    # establish our frame pointer
  10 0004 4883EC30 	        sub     rsp, 48     # local variables
  11              	        
  12 0008 48C7C105 	        mov     rcx, 5              # for indexing
  12      000000
  13 000f 8B4500   	        mov     eax, [rbp]          # indirect
  14 0012 8B45D0   	        mov     eax, -48[rbp]       # indirect + offset  
  15 0015 8B440DD0 	        mov     eax, -48[rbp+rcx]   # indirect + offset and index 
  16 0019 8B448DD0 	        mov     eax, -48[rbp+4*rcx] #      and scaled index 
  17              	       
  18 001d B8000000 	        mov     eax, 0      # return 0 to os
  18      00
  19 0022 4889EC   	        mov     rsp, rbp    # restore stack pointer
  20 0025 5D       	        pop     rbp         #   and frame pointer
  21 0026 C3       	        ret                 # back to caller
